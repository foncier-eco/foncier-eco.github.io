{% extends "base.html" %}

{% block source %}
  {% if page %}
    {% if page.meta %}
      {% if page.meta.index %}
      <h2>Continuer</h2>
      <ul class="rubrique">
        {% for item in nav %}
            {% if item.url %}
              <li><a href="{{ item.href|e }}">{{ item.title }}</a></li>
            {% else %}
              {% if item.children %}
                {% for item in item.children recursive %}
                    {% if item.url and loop.first %}
                      <li><a href="{{ item.url|e }}">{{ item.title }}</a></li>
                    {% elif loop.first %}
                      {% if item.children %}
                        {{ loop(item.children) }}
                      {% endif %}
                    {% endif %}
                {% endfor %}
              {% endif %}
            {% endif %}
        {% endfor %}
      </ul>
      {% endif %}
      {% if page.meta.authors or page.meta.url or page.meta.date %}
        <div class="admonition info">
        <p class="admonition-title">A propos</p>
        <p>{% if page.meta.authors %}{{ page.meta.authors }}{% endif %}
           {% if page.meta.authors and page.meta.date %} - {% endif %}
           {% if page.meta.date %}{{ page.meta.date }}{% endif %}
           {% if page.meta.authors or page.meta.date %}<br/>{% endif %}
           {% if page.meta.url %}
           <a href="{{ page.meta.url }}">Plus d'informations</a>
           {% endif %}
         </p>
        </div>
      {% endif %}
      {% if page.meta.source %}
        <h2></h2>
        <h6 id="__source">{{ lang.t("meta.source") }}</h6>
        {% set repo = config.repo_url %}
        {% if repo | last == "/" %}
          {% set repo = repo[:-1] %}
        {% endif %}
        {% set path = page.meta.path | default([""]) %}
        {% set file = page.meta.source %}
        <a href="{{ [repo, path, file] | join('/') }}" title="{{ file }}" class="md-source-file">
        {{ file }}
        </a>
      {% endif %}
      {% if page.meta.revision %}
        <div class="revision">mise Ã  jour {{ page.meta.revision }}</div>
      {% endif %}
    {% endif %}
  {% endif %}
{% endblock %}
